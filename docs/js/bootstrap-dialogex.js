class Bootstrap4ModalDialogManager{constructor(){this.modals=[],this.callbacks=[]}Unregister(a){var b=this.modals.indexOf(a);-1===b||(this.modals.splice(b,1),0===this.modals.length&&this.callbacks.forEach(function(c){c(!1)}))}Register(a){var b=this.modals.indexOf(a);-1!==b||(0===this.modals.length&&this.callbacks.forEach(function(c){c(!0)}),this.modals.push(a))}CloseForegroundDialog(){if(0!==this.modals.length){var a=this.modals[this.modals.length-1];a.Hide()}}CloseAllDialogs(){0===this.modals.length||this.modals.forEach(function(a){a.Hide()})}OnModalChanged(a){"function"==typeof a&&this.callbacks.push(a)}}var DialogManager=new Bootstrap4ModalDialogManager;class Bootstrap4ModalDialog{constructor(a,b,c,d){if(!b){throw"Dialog without content is surely something to be seen!??"}this.objState={},this.parent=a;var f=typeof b;this.dialogContent="string"==f?$("<div>").addClass("modal-body").text(b):"function"==f?$("<div>").addClass("modal-body").append(b(this)):$("<div>").addClass("modal-body").append(b),this.callbacks=[];var g=this;if(!d)this.dialogButtons=$("<div>").addClass("modal-footer").append($("<button>").addClass("btn btn-primary").attr({type:"button","modal-IsDefault":"true"}).text("OK").click(function(){g.result=1}));else{var h=typeof d;if("number"==h)d===Bootstrap4ModalDialog.ButtonsOK?this.dialogButtons=$("<div>").addClass("modal-footer").append($("<button>").addClass("btn btn-primary").attr({type:"button","modal-IsDefault":"true"}).text("OK").click(function(){g.result=1})):d===Bootstrap4ModalDialog.ButtonsClose?this.dialogButtons=$("<div>").addClass("modal-footer").append($("<button>").addClass("btn btn-primary").attr({type:"button","modal-IsDefault":"true"}).text("Close").click(function(){g.result=1})):d===Bootstrap4ModalDialog.ButtonsYesNo?this.dialogButtons=$("<div>").addClass("modal-footer").append($("<button>").addClass("btn btn-primary").attr({type:"button","modal-IsDefault":"true"}).text("Yes").click(function(){g.result=1}),[$("<button>").addClass("btn btn-secondary").attr({type:"button","modal-IsCancel":"true","data-dismiss":"modal"}).text("No")]):d===Bootstrap4ModalDialog.ButtonsYesNoDanger?this.dialogButtons=$("<div>").addClass("modal-footer").append($("<button>").addClass("btn btn-danger").attr({type:"button","modal-IsDefault":"true"}).text("Yes").click(function(){g.result=1}),[$("<button>").addClass("btn btn-primary").attr({type:"button","modal-IsCancel":"true","data-dismiss":"modal"}).text("No")]):void 0;else if("object"==h&&d.length&&0<d.length){this.dialogButtons=$("<div>").addClass("modal-footer");var i;d.forEach(function(j){var m=j;i=$("<button>").attr("type","button"),m.cssClass&&i.addClass(m.cssClass),m.label&&i.text(m.label),"function"==typeof m.action?i.click(function(n){n.stopPropagation(),m.action(g)}):i.click(function(n){n.stopPropagation()}),this.append(i)},this.dialogButtons)}}c||(c="Dialog"),this.dialogHeader=$("<div>").addClass("modal-header").append($("<h5>").addClass("modal-title").text(c),[$("<button>").addClass("close").attr({role:"button","aria-label":"Close","data-dismiss":"modal"}).append($("<span>").attr("aria-hidden","true").html("&times;"))]),this.dialog=$("<div>").addClass("modal fade").attr({tabindex:"-1",role:"dialog","aria-labelledby":"ModalLabel","aria-hidden":"true","data-backdrop":"false"}).append($("<div>").addClass("modal-dialog modal-dialog-centered").attr("role","document").append($("<div>").addClass("modal-content bg-dark").append(this.dialogHeader,[this.dialogContent,this.dialogButtons]).click(function(j){if(!j.target)j.stopPropagation();else{var k=$(j.target);k.is("button")||k.is("a")||k.hasClass("clickable")||j.stopPropagation()}}).draggable({handle:".modal-header",containment:a})))}SetData(a,b){this.objState[a]=b}GetData(a){return this.objState[a]}Show(a){var b=this;a?a.append(this.dialog):this.parent.append(this.dialog),this.dialog.on("hidden.bs.modal",function(){window.DialogManager.Unregister(b),b.TriggerCallback(),b.Dispose()}),this.dialog.on("show.bs.modal",function(){window.DialogManager.Register(b)}),this.dialog.modal()}RegisterCallback(a){"function"==typeof a&&this.callbacks.push(a)}TriggerCallback(){0===this.callbacks.length||this.callbacks.forEach(function(a){a(this,this.result)},this)}Hide(){this.dialog.modal("hide")}Dispose(){this.dialog.modal("dispose"),this.dialog.empty(),this.dialog.detach()}}Bootstrap4ModalDialog.ButtonsOK=0,Bootstrap4ModalDialog.ButtonsClose=1,Bootstrap4ModalDialog.ButtonsYesNo=2,Bootstrap4ModalDialog.ButtonsYesNoDanger=3;